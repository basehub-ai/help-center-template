@media (min-width: 1024px) {
  .container {
    width: 100%;

    > div {
      display: flex;
      flex-direction: row-reverse;
      justify-content: flex-end;
    }
  }
}

.container {
  max-width: 100vw;

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    scroll-margin-top: var(--space-9);
  }

  ol ol,
  ol ul,
  ul ol,
  ul ul {
    margin-block: var(--space-3);
  }

  li {
    p {
      margin-bottom: 0;
    }
    margin-bottom: var(--space-2);
  }

  table {
    p:last-child {
      margin-bottom: 0;
    }
  }

  picture {
    background-color: var(--gray-2);
    padding: var(--space-1);
    display: flex;
    max-width: max-content;
    margin-block: var(--space-6);
    border-radius: var(--radius-4);
    border: 1px solid var(--gray-5);
    z-index: 1;
    position: relative;
    box-shadow: 0px 1px 2px 0px var(--gray-6);

    video,
    img {
      border-radius: var(--radius-3);
      position: relative;
      max-width: 100%;
      height: auto;
    }

    img {
      cursor: zoom-in;
    }
  }

  figcaption {
    padding: var(--space-5);
    padding-bottom: var(--space-2);
    margin-top: calc(var(--space-8) * -1);
    margin-bottom: var(--space-6);
    display: block;
    position: relative;
    text-align: center;
    z-index: 0;
    border-bottom-left-radius: var(--radius-4);
    border-bottom-right-radius: var(--radius-4);
    border: 1px solid var(--gray-5);
    background: var(--gray-3);
    color: var(--gray-11);
    font-size: var(--font-size-2);
    font-weight: 500;
    line-height: var(--space-4);
    text-wrap: pretty;
  }

  pre {
    &:focus {
      outline-color: var(--focus-9);
    }

    cursor: text;
    overflow-x: auto;
    line-height: calc(20px * var(--scaling));
    border-radius: var(--radius-4);
    font-size: var(--font-size-2);
    margin-block: var(--space-6);
    border: 1px solid var(--gray-6);
    font-size: var(--font-size-1);
    font-weight: 500;
    position: relative;

    --shiki-color-text: #000;
    --shiki-background: var(--gray-2);
    --shiki-token-constant: var(--accent-12);
    --shiki-token-function: var(--gray-11);
    --shiki-token-string-expression: var(--gray-11);
    --shiki-token-string: var(--accent-indicator);
    --shiki-token-comment: var(--gray-10);
    --shiki-token-keyword: var(--accent-11);
    --shiki-token-parameter: #d6deeb;
    --shiki-token-punctuation: #c792e9;
    --shiki-token-link: #79b8ff;

    counter-reset: step;
    counter-increment: step 0;

    :global(.line::before) {
      content: counter(step);
      counter-increment: step;
      width: var(--space-4);
      display: inline-block;
      user-select: none;
      text-align: right;
      color: var(--gray-9);
      margin-right: var(--space-4);
    }

    :global(.line) {
      box-sizing: border-box;
      display: inline-block;
      width: 100%;
      padding-left: var(--space-3);
      padding-right: var(--space-3);

      &:first-child {
        margin-top: var(--space-3);
      }

      &:last-child {
        margin-bottom: var(--space-3);
      }

      &:global(.highlighted) {
        background-color: var(--gray-4);
      }
      :global(.highlighted-word) {
        background-color: var(--accent-5);
        color: var(--gray-12) !important;
        padding: 1px 0;
        margin: -1px 0;
      }
      &:global(.diff.remove) {
        background-color: var(--red-3);

        &::before {
          content: '-';
          color: var(--red-12);
        }
      }
      &:global(.diff.add) {
        background-color: var(--green-3);

        &::before {
          content: '+';
          color: var(--green-12);
        }
      }
    }
  }
}
